var C=Object.defineProperty;var $=(e,t,n)=>t in e?C(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var d=(e,t,n)=>$(e,typeof t!="symbol"?t+"":t,n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const r of o.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&s(r)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();function D(e){for(let t=0;t<e.elements.length;t+=1){const n=e.elements[t];if(n instanceof HTMLInputElement&&n.type==="checkbox"){const s=h(n);p(e,!n.checked,s)}}}function p(e,t,n){for(const s of n){const i=e.elements.namedItem(s);if(i instanceof HTMLInputElement&&(i.disabled=t,i.type==="checkbox"&&(t||i.checked))){const o=h(i);p(e,t,o)}}}function h(e){const t=(e.dataset.children??"").trim();return t?t.split(/\s+/):[]}function b(e){const t=new DataTransfer;let n=0;const s=new Map;for(const i of Array.from(e))if(_(i))t.items.add(i);else{n+=1;const o=i.name.lastIndexOf("."),r=o<=0?"":i.name.slice(o+1),a=s.get(r);s.set(r,a?a+1:1)}return{discardedCount:n,discardedCountsPerType:s,files:t.files}}function _(e){const t=/^image\/(?:jpeg|png|gif|webp|avif|svg\+xml|targa)/i,n=/\.(?:jpe?g|png|gif|webp|avif|svg\+xml|tga)$/i;return t.test(e.type)||n.test(e.name)}function w({discardedCount:e,discardedCountsPerType:t,files:n}){const s=Array.from(t.entries()).sort(H).reduce((o,[r,a])=>`${o}
- *.${r} 파일 ${a}개`,""),i=n.length+e;window.alert(`파일 ${i}개 중 ${e}개가 선택에서 제외됩니다.
${s}`)}function H(e,t){const n=t[1]-e[1];return n===0?e[0]<t[0]?-1:e[0]>t[0]?1:0:n}function m(e,t){const n=e.querySelector(t);if(!n)throw new Error(`"${t}" is not found.`);return n}function L(e){const t=m(document,"#file-list");if(!e||e.length===0)for(const n of t.children)n.remove();else{const n=[];for(const{name:s}of e){const i=document.createElement("li");i.textContent=s,n.push(i)}t.replaceChildren(...n)}}function F(e){var s,i,o;if(e.preventDefault(),document.body.classList.contains("packing"))return;if(!((i=(s=e.dataTransfer)==null?void 0:s.files)!=null&&i.length))return;const t=b(e.dataTransfer.files);t.discardedCount&&w(t);const n=(o=document.forms.namedItem("app"))==null?void 0:o.elements.namedItem("files");n instanceof HTMLInputElement&&n.type==="file"&&(n.files=t.files),L(t.files)}function B(){const e=b(this.files??new FileList);e.discardedCount&&w(e),this.files=e.files,L(e.files)}const N="modulepreload",A=function(e){return"/img-seq-pack/"+e},y={},K=function(t,n,s){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const r=document.querySelector("meta[property=csp-nonce]"),a=(r==null?void 0:r.nonce)||(r==null?void 0:r.getAttribute("nonce"));i=Promise.allSettled(n.map(c=>{if(c=A(c),c in y)return;y[c]=!0;const f=c.endsWith(".css"),P=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${P}`))return;const l=document.createElement("link");if(l.rel=f?"stylesheet":N,f||(l.as="script"),l.crossOrigin="",l.href=c,a&&l.setAttribute("nonce",a),document.head.appendChild(l),f)return new Promise((T,x)=>{l.addEventListener("load",T),l.addEventListener("error",()=>x(new Error(`Unable to preload CSS for ${c}`)))})}))}function o(r){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=r,window.dispatchEvent(a),!a.defaultPrevented)throw r}return i.then(r=>{for(const a of r||[])a.status==="rejected"&&o(a.reason);return t().catch(o)})},k={"image-enlarge":!0,"keep-extension":!1,"page-description":!1,"page-number":!0,"page-sort":!0,"page-sort-natural":!0,"page-sort-split":!0,replace:!1,"replace-regex":!1},v={"page-height":540,"page-number-start":1,"page-width":960,"quality-jpeg":90},S={"background-color":"#5e5e5e","replace-find":"","replace-replace":"",title:"img-seq-pack"},I=new Set(Object.keys(k)),M=new Set(Object.keys(v)),O=new Set(Object.keys(S)),R=new Set([...I,...M,...O]);function j(e){return I.has(e)}function q(e){return M.has(e)}function U(e){return O.has(e)}function V(e){return R.has(e)}function z(e){const t=new Set;for(let o=0;o<e.elements.length;o+=1){const r=e.elements[o];if(r instanceof HTMLInputElement){const a=r.name;V(a)&&t.add(a)}}const n={...k},s={...v},i={...S};for(const o of t){const r=e.elements.namedItem(o);if(j(o))n[o]=r.checked;else if(q(o)){const a=r.valueAsNumber;Math.abs(a)<=Number.MAX_SAFE_INTEGER&&(s[o]=a)}else U(o)&&(i[o]=r.value)}return{...n,...s,...i}}function G(e,t){const n=e.elements.namedItem(t);if(n instanceof HTMLInputElement)return n;throw n instanceof RadioNodeList?new Error(`"${t}" in "#${e.id}" is a RadioNodeList.`):new Error(`"${t}" as an HTMLInputelement is not found in "#${e.id}".`)}class g{constructor(t,n){d(this,"progressElement");d(this,"descriptionElement");d(this,"aborted");d(this,"begin");this.progressElement=m(document,t),this.descriptionElement=m(document,n),this.aborted=!1,this.begin=Date.now()}async update(t){if(this.aborted)return!1;const n=Math.floor(t*100),s=Math.floor((Date.now()-this.begin)/1e3);return this.progressElement.value=t,this.descriptionElement.textContent=`${n}% (${s}초)`,await Promise.resolve(),!0}async reset(t){return this.aborted?!1:(this.begin=Date.now(),await this.update(t))}async complete(){if(this.aborted)return!1;const t=Math.ceil((Date.now()-this.begin)/100)/10;return this.progressElement.value=1,this.descriptionElement.textContent=`완료 (${t}초)`,await Promise.resolve(),!0}async cancel(){return this.aborted=!0,this.descriptionElement.textContent="취소됨: "+(this.descriptionElement.textContent??""),await Promise.resolve(),!1}static async withUpdate(t,n,s){const i=new g(t,n);return await i.update(s),i}}const Q=new Set(["checkbox","file","number","radio","text"]);function E(e,t){for(let s=0;s<e.elements.length;s+=1){const i=e.elements.item(s);i instanceof HTMLInputElement&&Q.has(i.type)&&(i.disabled=!t)}const n=e.elements.namedItem("button-pack");n&&n instanceof HTMLButtonElement&&(n.textContent=t?"변환하기":"취소"),t?document.body.classList.remove("packing"):document.body.classList.add("packing")}let u=null;async function W(){var t;const e=this.form;if(!e)throw new Error("This pack button doesn't belong to the root form element.");if(u)u.cancel(),u=null;else{const n=G(e,"files");if(!((t=n==null?void 0:n.files)!=null&&t.length)){e.reportValidity();return}E(e,!1);const s=z(e);u=await g.withUpdate("#pack-progress","#pack-description",0);const i=(await K(async()=>{const{default:o}=await import("./buildDocument-7HGWmYpo.js");return{default:o}},[])).default;await i(n.files,s,u)&&await u.complete()}u=null,E(e,!0)}function X(e){if(e.target instanceof HTMLInputElement&&e.target.type==="checkbox"){const t=h(e.target);p(this,!e.target.checked,t)}}function J(){const e=m(document,"#app");D(e),e.addEventListener("click",X);const t=e.elements.namedItem("button-pack");if(!t||!(t instanceof HTMLButtonElement))throw new Error('"button-pack" as HTMLButtonElement is not found.');t.addEventListener("click",W);const n=e.elements.namedItem("files");if(!n||!(n instanceof HTMLInputElement))throw new Error('"files" as HTMLInputElement is not found.');n.addEventListener("change",B),document.body.addEventListener("dragover",s=>s.preventDefault()),document.body.addEventListener("drop",F)}J();export{K as _};
