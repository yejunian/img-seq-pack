var T=Object.defineProperty;var $=(e,t,n)=>t in e?T(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var d=(e,t,n)=>$(e,typeof t!="symbol"?t+"":t,n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const r of s.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&i(r)}).observe(document,{childList:!0,subtree:!0});function n(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(o){if(o.ep)return;o.ep=!0;const s=n(o);fetch(o.href,s)}})();function y(e){const t=new DataTransfer;let n=0;const i=new Map;for(const o of Array.from(e))if(C(o))t.items.add(o);else{n+=1;const s=o.name.lastIndexOf("."),r=s<=0?"":o.name.slice(s+1),a=i.get(r);i.set(r,a?a+1:1)}return{discardedCount:n,discardedCountsPerType:i,files:t.files}}function C(e){const t=/^image\/(?:jpeg|png|gif|webp|avif|svg\+xml|targa)/i,n=/\.(?:jpe?g|png|gif|webp|avif|svg\+xml|tga)$/i;return t.test(e.type)||n.test(e.name)}function w({discardedCount:e,discardedCountsPerType:t,files:n}){const i=Array.from(t.entries()).sort(x).reduce((s,[r,a])=>`${s}
- *.${r} 파일 ${a}개`,""),o=n.length+e;window.alert(`파일 ${o}개 중 ${e}개가 선택에서 제외됩니다.
${i}`)}function x(e,t){const n=t[1]-e[1];return n===0?e[0]<t[0]?-1:e[0]>t[0]?1:0:n}function m(e,t){const n=e.querySelector(t);if(!n)throw new Error(`"${t}" is not found.`);return n}function E(e){const t=m(document,"#file-list ol");if(!e||e.length===0)for(const n of t.children)n.remove();else{const n=[];for(const{name:i}of e){const o=document.createElement("li");o.textContent=i,n.push(o)}t.replaceChildren(...n)}}function _(e){var i,o,s;if(e.preventDefault(),document.body.classList.contains("packing"))return;if(!((o=(i=e.dataTransfer)==null?void 0:i.files)!=null&&o.length))return;const t=y(e.dataTransfer.files);t.discardedCount&&w(t);const n=(s=document.forms.namedItem("app"))==null?void 0:s.elements.namedItem("files");n instanceof HTMLInputElement&&n.type==="file"&&(n.files=t.files),E(t.files)}function B(){const e=y(this.files??new FileList);e.discardedCount&&w(e),this.files=e.files,E(e.files)}const D="modulepreload",F=function(e){return"/img-seq-pack/"+e},h={},N=function(t,n,i){let o=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const r=document.querySelector("meta[property=csp-nonce]"),a=(r==null?void 0:r.nonce)||(r==null?void 0:r.getAttribute("nonce"));o=Promise.allSettled(n.map(l=>{if(l=F(l),l in h)return;h[l]=!0;const f=l.endsWith(".css"),M=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${M}`))return;const c=document.createElement("link");if(c.rel=f?"stylesheet":D,f||(c.as="script"),c.crossOrigin="",c.href=l,a&&c.setAttribute("nonce",a),document.head.appendChild(c),f)return new Promise((P,I)=>{c.addEventListener("load",P),c.addEventListener("error",()=>I(new Error(`Unable to preload CSS for ${l}`)))})}))}function s(r){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=r,window.dispatchEvent(a),!a.defaultPrevented)throw r}return o.then(r=>{for(const a of r||[])a.status==="rejected"&&s(a.reason);return t().catch(s)})},b={"image-enlarge":!0,"keep-extension":!1,"page-description":!1,"page-number":!0,"page-sort":!0,"page-sort-natural":!0,"page-sort-split":!0,replace:!1,"replace-regex":!1},v={"page-height":540,"page-number-start":1,"page-width":960,"quality-jpeg":90},L={"background-color":"#5e5e5e","replace-find":"","replace-replace":"",title:"img-seq-pack"},O=new Set(Object.keys(b)),S=new Set(Object.keys(v)),k=new Set(Object.keys(L)),H=new Set([...O,...S,...k]);function A(e){return O.has(e)}function K(e){return S.has(e)}function j(e){return k.has(e)}function q(e){return H.has(e)}function R(e){const t=new Set;for(let s=0;s<e.elements.length;s+=1){const r=e.elements[s];if(r instanceof HTMLInputElement){const a=r.name;q(a)&&t.add(a)}}const n={...b},i={...v},o={...L};for(const s of t){const r=e.elements.namedItem(s);if(A(s))n[s]=r.checked;else if(K(s)){const a=r.valueAsNumber;Math.abs(a)<=Number.MAX_SAFE_INTEGER&&(i[s]=a)}else j(s)&&(o[s]=r.value)}return{...n,...i,...o}}function U(e,t){const n=e.elements.namedItem(t);if(n instanceof HTMLInputElement)return n;throw n instanceof RadioNodeList?new Error(`"${t}" in "#${e.id}" is a RadioNodeList.`):new Error(`"${t}" as an HTMLInputelement is not found in "#${e.id}".`)}class p{constructor(t,n){d(this,"progressElement");d(this,"descriptionElement");d(this,"aborted");d(this,"begin");this.progressElement=m(document,t),this.descriptionElement=m(document,n),this.aborted=!1,this.begin=Date.now()}async update(t){if(this.aborted)return!1;const n=Math.floor(t*100),i=Math.floor((Date.now()-this.begin)/1e3);return this.progressElement.value=t,this.descriptionElement.textContent=`${n}% (${i}초)`,await Promise.resolve(),!0}async reset(t){return this.aborted?!1:(this.begin=Date.now(),await this.update(t))}async complete(){if(this.aborted)return!1;const t=Math.ceil((Date.now()-this.begin)/100)/10;return this.progressElement.value=1,this.descriptionElement.textContent=`완료 (${t}초)`,await Promise.resolve(),!0}async cancel(){return this.aborted=!0,this.descriptionElement.textContent="취소됨: "+(this.descriptionElement.textContent??""),await Promise.resolve(),!1}static async withUpdate(t,n,i){const o=new p(t,n);return await o.update(i),o}}const V=new Set(["checkbox","file","number","radio","text"]);function g(e,t){for(let i=0;i<e.elements.length;i+=1){const o=e.elements.item(i);o instanceof HTMLInputElement&&V.has(o.type)&&(o.disabled=!t)}const n=e.elements.namedItem("button-pack");n&&n instanceof HTMLButtonElement&&(n.textContent=t?"변환하기":"취소"),t?document.body.classList.remove("packing"):document.body.classList.add("packing")}let u=null;async function z(){var t;const e=this.form;if(!e)throw new Error("This pack button doesn't belong to the root form element.");if(u)u.cancel(),u=null;else{const n=U(e,"files");if(!((t=n==null?void 0:n.files)!=null&&t.length)){e.reportValidity();return}g(e,!1);const i=R(e);u=await p.withUpdate("#pack-progress","#pack-description",0);const o=(await N(async()=>{const{default:s}=await import("./buildDocument-5jD7N4Ou.js");return{default:s}},[])).default;await o(n.files,i,u)&&await u.complete()}u=null,g(e,!0)}function G(){const e=m(document,"#app"),t=e.elements.namedItem("button-pack");if(!t||!(t instanceof HTMLButtonElement))throw new Error('"button-pack" as HTMLButtonElement is not found.');t.addEventListener("click",z);const n=e.elements.namedItem("files");if(!n||!(n instanceof HTMLInputElement))throw new Error('"files" as HTMLInputElement is not found.');n.addEventListener("change",B),document.body.addEventListener("dragover",i=>i.preventDefault()),document.body.addEventListener("drop",_)}G();export{N as _};
