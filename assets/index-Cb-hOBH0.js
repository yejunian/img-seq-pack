(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))o(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const r of s.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&o(r)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function o(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function C(e){for(let t=0;t<e.elements.length;t+=1){const n=e.elements[t];if(n instanceof HTMLInputElement&&n.type==="checkbox"){const o=h(n);p(e,!n.checked,o)}}}function p(e,t,n){for(const o of n){const i=e.elements.namedItem(o);if(i instanceof HTMLInputElement&&(i.disabled=t,i.type==="checkbox"&&(t||i.checked))){const s=h(i);p(e,t,s)}}}function h(e){const t=(e.dataset.children??"").trim();return t?t.split(/\s+/):[]}function b(e){const t=new DataTransfer;let n=0;const o=new Map;for(const i of Array.from(e))if($(i))t.items.add(i);else{n+=1;const s=i.name.lastIndexOf("."),r=s<=0?"":i.name.slice(s+1),a=o.get(r);o.set(r,a?a+1:1)}return{discardedCount:n,discardedCountsPerType:o,files:t.files}}function $(e){const t=/^image\/(?:jpeg|png|gif|webp|avif|svg\+xml|targa)/i,n=/\.(?:jpe?g|png|gif|webp|avif|svg\+xml|tga)$/i;return t.test(e.type)||n.test(e.name)}function w({discardedCount:e,discardedCountsPerType:t,files:n}){const o=Array.from(t.entries()).sort(N).reduce((s,[r,a])=>`${s}
- *.${r} 파일 ${a}개`,""),i=n.length+e;window.alert(`파일 ${i}개 중 ${e}개가 선택에서 제외됩니다.
${o}`)}function N(e,t){const n=t[1]-e[1];return n===0?e[0]<t[0]?-1:e[0]>t[0]?1:0:n}function m(e,t){const n=e.querySelector(t);if(!n)throw new Error(`"${t}" is not found.`);return n}function L(e){const t=m(document,"#file-list");if(!e||e.length===0)for(const n of t.children)n.remove();else{const n=[];for(const{name:o}of e){const i=document.createElement("li");i.textContent=o,n.push(i)}t.replaceChildren(...n)}}function D(e){if(e.preventDefault(),document.body.classList.contains("packing"))return;if(!e.dataTransfer?.files?.length)return;const t=b(e.dataTransfer.files);t.discardedCount&&w(t);const n=document.forms.namedItem("app")?.elements.namedItem("files");n instanceof HTMLInputElement&&n.type==="file"&&(n.files=t.files),L(t.files)}function _(){const e=b(this.files??new FileList);e.discardedCount&&w(e),this.files=e.files,L(e.files)}const H="modulepreload",F=function(e){return"/img-seq-pack/"+e},y={},B=function(t,n,o){let i=Promise.resolve();if(n&&n.length>0){let P=function(c){return Promise.all(c.map(d=>Promise.resolve(d).then(f=>({status:"fulfilled",value:f}),f=>({status:"rejected",reason:f}))))};document.getElementsByTagName("link");const r=document.querySelector("meta[property=csp-nonce]"),a=r?.nonce||r?.getAttribute("nonce");i=P(n.map(c=>{if(c=F(c),c in y)return;y[c]=!0;const d=c.endsWith(".css"),f=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${f}`))return;const l=document.createElement("link");if(l.rel=d?"stylesheet":H,d||(l.as="script"),l.crossOrigin="",l.href=c,a&&l.setAttribute("nonce",a),document.head.appendChild(l),d)return new Promise((T,x)=>{l.addEventListener("load",T),l.addEventListener("error",()=>x(new Error(`Unable to preload CSS for ${c}`)))})}))}function s(r){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=r,window.dispatchEvent(a),!a.defaultPrevented)throw r}return i.then(r=>{for(const a of r||[])a.status==="rejected"&&s(a.reason);return t().catch(s)})},v={"image-enlarge":!0,"keep-extension":!1,"page-description":!1,"page-number":!0,"page-sort":!0,"page-sort-natural":!0,"page-sort-split":!0,replace:!1,"replace-regex":!1},k={"page-height":540,"page-number-start":1,"page-width":960,"quality-jpeg":90},M={"background-color":"#5e5e5e","replace-find":"","replace-replace":"",title:"img-seq-pack"},S=new Set(Object.keys(v)),I=new Set(Object.keys(k)),O=new Set(Object.keys(M)),A=new Set([...S,...I,...O]);function K(e){return S.has(e)}function j(e){return I.has(e)}function R(e){return O.has(e)}function q(e){return A.has(e)}function U(e){const t=new Set;for(let s=0;s<e.elements.length;s+=1){const r=e.elements[s];if(r instanceof HTMLInputElement){const a=r.name;q(a)&&t.add(a)}}const n={...v},o={...k},i={...M};for(const s of t){const r=e.elements.namedItem(s);if(K(s))n[s]=r.checked;else if(j(s)){const a=r.valueAsNumber;Math.abs(a)<=Number.MAX_SAFE_INTEGER&&(o[s]=a)}else R(s)&&(i[s]=r.value)}return{...n,...o,...i}}function V(e,t){const n=e.elements.namedItem(t);if(n instanceof HTMLInputElement)return n;throw n instanceof RadioNodeList?new Error(`"${t}" in "#${e.id}" is a RadioNodeList.`):new Error(`"${t}" as an HTMLInputelement is not found in "#${e.id}".`)}class g{progressElement;descriptionElement;aborted;begin;constructor(t,n){this.progressElement=m(document,t),this.descriptionElement=m(document,n),this.aborted=!1,this.begin=Date.now()}async update(t){if(this.aborted)return!1;const n=Math.floor(t*100),o=Math.floor((Date.now()-this.begin)/1e3);return this.progressElement.value=t,this.descriptionElement.textContent=`${n}% (${o}초)`,await Promise.resolve(),!0}async reset(t){return this.aborted?!1:(this.begin=Date.now(),await this.update(t))}async complete(){if(this.aborted)return!1;const t=Math.ceil((Date.now()-this.begin)/100)/10;return this.progressElement.value=1,this.descriptionElement.textContent=`완료 (${t}초)`,await Promise.resolve(),!0}async cancel(){return this.aborted=!0,this.descriptionElement.textContent="취소됨: "+(this.descriptionElement.textContent??""),await Promise.resolve(),!1}static async withUpdate(t,n,o){const i=new g(t,n);return await i.update(o),i}}const z=new Set(["checkbox","file","number","radio","text"]);function E(e,t){for(let o=0;o<e.elements.length;o+=1){const i=e.elements.item(o);i instanceof HTMLInputElement&&z.has(i.type)&&(i.disabled=!t)}const n=e.elements.namedItem("button-pack");n&&n instanceof HTMLButtonElement&&(n.textContent=t?"변환하기":"취소"),t?document.body.classList.remove("packing"):document.body.classList.add("packing")}let u=null;async function G(){const e=this.form;if(!e)throw new Error("This pack button doesn't belong to the root form element.");if(u)u.cancel(),u=null;else{const t=V(e,"files");if(!t?.files?.length){e.reportValidity();return}E(e,!1);const n=U(e);u=await g.withUpdate("#pack-progress","#pack-description",0);const o=(await B(async()=>{const{default:i}=await import("./buildDocument-kkIpJ_Jt.js");return{default:i}},[])).default;await o(t.files,n,u)&&await u.complete()}u=null,E(e,!0)}function Q(e){if(e.target instanceof HTMLInputElement&&e.target.type==="checkbox"){const t=h(e.target);p(this,!e.target.checked,t)}}function W(){const e=m(document,"#app");C(e),e.addEventListener("click",Q);const t=e.elements.namedItem("button-pack");if(!t||!(t instanceof HTMLButtonElement))throw new Error('"button-pack" as HTMLButtonElement is not found.');t.addEventListener("click",G);const n=e.elements.namedItem("files");if(!n||!(n instanceof HTMLInputElement))throw new Error('"files" as HTMLInputElement is not found.');n.addEventListener("change",_),document.body.addEventListener("dragover",o=>o.preventDefault()),document.body.addEventListener("drop",D)}W();export{B as _};
