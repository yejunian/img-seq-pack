var P=Object.defineProperty;var T=(e,t,n)=>t in e?P(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var u=(e,t,n)=>T(e,typeof t!="symbol"?t+"":t,n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const r of o.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&i(r)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();function g(e){const t=new DataTransfer;let n=0;const i=new Map;for(const s of Array.from(e))if($(s))t.items.add(s);else{n+=1;const o=s.name.lastIndexOf("."),r=o<=0?"":s.name.slice(o+1),a=i.get(r);i.set(r,a?a+1:1)}return{discardedCount:n,discardedCountsPerType:i,files:t.files}}function $(e){const t=/^image\/(?:jpeg|png|gif|webp|avif|svg\+xml|targa)/i,n=/\.(?:jpe?g|png|gif|webp|avif|svg\+xml|tga)$/i;return t.test(e.type)||n.test(e.name)}function y({discardedCount:e,discardedCountsPerType:t,files:n}){const i=Array.from(t.entries()).sort(C).reduce((o,[r,a])=>`${o}
- *.${r} 파일 ${a}개`,""),s=n.length+e;window.alert(`파일 ${s}개 중 ${e}개가 선택에서 제외됩니다.
${i}`)}function C(e,t){const n=t[1]-e[1];return n===0?e[0]<t[0]?-1:e[0]>t[0]?1:0:n}function f(e,t){const n=e.querySelector(t);if(!n)throw new Error(`"${t}" is not found.`);return n}function w(e){const t=f(document,"#file-list ol");if(!e||e.length===0)for(const n of t.children)n.remove();else{const n=[];for(const{name:i}of e){const s=document.createElement("li");s.textContent=i,n.push(s)}t.replaceChildren(...n)}}function x(e){var i,s,o;if(e.preventDefault(),document.body.classList.contains("packing"))return;if(!((s=(i=e.dataTransfer)==null?void 0:i.files)!=null&&s.length))return;const t=g(e.dataTransfer.files);t.discardedCount&&y(t);const n=(o=document.forms.namedItem("app"))==null?void 0:o.elements.namedItem("files");n instanceof HTMLInputElement&&n.type==="file"&&(n.files=t.files),w(t.files)}function _(){const e=g(this.files??new FileList);e.discardedCount&&y(e),this.files=e.files,w(e.files)}const B="modulepreload",D=function(e){return"/img-seq-pack/"+e},p={},F=function(t,n,i){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),r=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.all(n.map(a=>{if(a=D(a),a in p)return;p[a]=!0;const d=a.endsWith(".css"),k=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${a}"]${k}`))return;const l=document.createElement("link");if(l.rel=d?"stylesheet":B,d||(l.as="script",l.crossOrigin=""),l.href=a,r&&l.setAttribute("nonce",r),document.head.appendChild(l),d)return new Promise((M,I)=>{l.addEventListener("load",M),l.addEventListener("error",()=>I(new Error(`Unable to preload CSS for ${a}`)))})}))}return s.then(()=>t()).catch(o=>{const r=new Event("vite:preloadError",{cancelable:!0});if(r.payload=o,window.dispatchEvent(r),!r.defaultPrevented)throw o})},E={"image-enlarge":!0,"keep-extension":!1,"page-description":!1,"page-number":!0,"page-sort":!0,"page-sort-natural":!0,"page-sort-split":!0,replace:!1,"replace-regex":!1},b={"page-height":540,"page-number-start":1,"page-width":960,"quality-jpeg":90},v={"background-color":"#5e5e5e","replace-find":"","replace-replace":"",title:"img-seq-pack"},L=new Set(Object.keys(E)),O=new Set(Object.keys(b)),S=new Set(Object.keys(v)),N=new Set([...L,...O,...S]);function H(e){return L.has(e)}function A(e){return O.has(e)}function K(e){return S.has(e)}function q(e){return N.has(e)}function R(e){const t=new Set;for(let o=0;o<e.elements.length;o+=1){const r=e.elements[o];if(r instanceof HTMLInputElement){const a=r.name;q(a)&&t.add(a)}}const n={...E},i={...b},s={...v};for(const o of t){const r=e.elements.namedItem(o);if(H(o))n[o]=r.checked;else if(A(o)){const a=r.valueAsNumber;Math.abs(a)<=Number.MAX_SAFE_INTEGER&&(i[o]=a)}else K(o)&&(s[o]=r.value)}return{...n,...i,...s}}function j(e,t){const n=e.elements.namedItem(t);if(n instanceof HTMLInputElement)return n;throw n instanceof RadioNodeList?new Error(`"${t}" in "#${e.id}" is a RadioNodeList.`):new Error(`"${t}" as an HTMLInputelement is not found in "#${e.id}".`)}class m{constructor(t,n){u(this,"progressElement");u(this,"descriptionElement");u(this,"aborted");u(this,"begin");this.progressElement=f(document,t),this.descriptionElement=f(document,n),this.aborted=!1,this.begin=Date.now()}async update(t){if(this.aborted)return!1;const n=Math.floor(t*100),i=Math.floor((Date.now()-this.begin)/1e3);return this.progressElement.value=t,this.descriptionElement.textContent=`${n}% (${i}초)`,await Promise.resolve(),!0}async reset(t){return this.aborted?!1:(this.begin=Date.now(),await this.update(t))}async complete(){if(this.aborted)return!1;const t=Math.ceil((Date.now()-this.begin)/100)/10;return this.progressElement.value=1,this.descriptionElement.textContent=`완료 (${t}초)`,await Promise.resolve(),!0}async cancel(){return this.aborted=!0,this.descriptionElement.textContent="취소됨: "+(this.descriptionElement.textContent??""),await Promise.resolve(),!1}static async withUpdate(t,n,i){const s=new m(t,n);return await s.update(i),s}}const U=new Set(["checkbox","file","number","radio","text"]);function h(e,t){for(let i=0;i<e.elements.length;i+=1){const s=e.elements.item(i);s instanceof HTMLInputElement&&U.has(s.type)&&(s.disabled=!t)}const n=e.elements.namedItem("button-pack");n&&n instanceof HTMLButtonElement&&(n.textContent=t?"변환하기":"취소"),t?document.body.classList.remove("packing"):document.body.classList.add("packing")}let c=null;async function V(){var t;const e=this.form;if(!e)throw new Error("This pack button doesn't belong to the root form element.");if(c)c.cancel(),c=null;else{const n=j(e,"files");if(!((t=n==null?void 0:n.files)!=null&&t.length)){e.reportValidity();return}h(e,!1);const i=R(e);c=await m.withUpdate("#pack-progress","#pack-description",0);const s=(await F(async()=>{const{default:o}=await import("./buildDocument-Cyevcwgy.js");return{default:o}},[])).default;await s(n.files,i,c)&&await c.complete()}c=null,h(e,!0)}function z(){const e=f(document,"#app"),t=e.elements.namedItem("button-pack");if(!t||!(t instanceof HTMLButtonElement))throw new Error('"button-pack" as HTMLButtonElement is not found.');t.addEventListener("click",V);const n=e.elements.namedItem("files");if(!n||!(n instanceof HTMLInputElement))throw new Error('"files" as HTMLInputElement is not found.');n.addEventListener("change",_),document.body.addEventListener("dragover",i=>i.preventDefault()),document.body.addEventListener("drop",x)}z();export{F as _};
